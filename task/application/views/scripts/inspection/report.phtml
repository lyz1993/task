<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" type="text/css"
          href="/jquery-easyui-1.4.5/themes/gray/easyui.css">
    <link rel="stylesheet" type="text/css"
          href="/jquery-easyui-1.4.5/themes/icon.css">
    <script type="text/javascript" src="/jquery-easyui-1.4.5/jquery.min.js"></script>
    <script type="text/javascript" src="/jquery-easyui-1.4.5/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="/jquery-easyui-1.4.5/locale/easyui-lang-zh_CN.js"></script>

</head>
<body>

<div align="center">
<h1>山东省教育数据中心巡检表</h1>
    <div align="center">
        <?php
        $year = $this->year;
        $month = $this->month;
        ?>
        <h2>
            <select  id="year" style="width: 55px;height: 25px">
                <?php
                for($y=2015;$y<=2017;$y++)
                {
                    if($y==$year)
                    {
                        echo "<option selected = 'selected' value='".$y."'>".$y."</option>";
                    }else{
                        echo "<option value='".$y."'>".$y."</option>";
                    }

                }
                ?>
            </select>
            年
            <select  id="month" style="width: 40px;height: 25px" onchange="month()">
                <?php
                for($m=1;$m<=12;$m++)
                {
                    if($m==$month)
                    {
                        echo "<option selected = 'selected' value='".$m."'>".$m."</option>";
                    }else{
                        echo "<option value='".$m."'>".$m."</option>";
                    }

                }
                ?>
            </select>
            月
        </h2></div>
    <?php
    $monthdays = date('t',strtotime($year."-".$month));
    $message = $this->message;
    $remarks = "";
    ?>
    <table border=1px style="BORDER-COLLAPSE: collapse" borderColor="#111111" cellSpacing="0" cellPadding="2" border="1">
        <tr><td style="text-align: center" colspan="2">巡检内容</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td style='text-align: center'>$i</td>";
            }
            ?>
        </tr>
        <tr><td rowspan="5">UPS室</td>
            <td>UPS</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])//当日期相同
                    {
                        if(isset($message[$j]['UPS']))//如果有参数
                        {
                            if($message[$j]['UPS'])//如果参数有值
                            {
                                $remarks=$remarks.$message[$j]['date']."（UPS室：".$message[$j]['UPS']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>电池组</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['Battery']))
                        {
                            if($message[$j]['Battery'])
                        {
                            $remarks=$remarks.$message[$j]['date']."（电池组：".$message[$j]['Battery']."）";
                        }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>排风机</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['Blower']))
                        {
                            if($message[$j]['Blower'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（排风机:".$message[$j]['Blower']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>配电柜</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['Electric']))
                        {
                            if($message[$j]['Electric'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（配电柜：".$message[$j]['Electric']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>空调</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['airConditioner_UPS']))
                        {
                            if($message[$j]['airConditioner_UPS'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（UPS室空调:".$message[$j]['airConditioner_UPS']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td rowspan="3">消防系统</td>
            <td>钢瓶间</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['Cylinder']))
                        {
                            if($message[$j]['Cylinder'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（钢瓶间:".$message[$j]['Cylinder']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>泄压阀</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['PressureReliefValve']))
                        {
                            if($message[$j]['PressureReliefValve'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（泄压阀:".$message[$j]['PressureReliefValve']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>消防主机</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['FireEngine']))
                        {
                            if($message[$j]['FireEngine'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（消防主机:".$message[$j]['FireEngine']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td rowspan="3">接入间</td>
            <td>网络设备</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['networkEquipment']))
                        {
                            if($message[$j]['networkEquipment'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（网络设备:".$message[$j]['networkEquipment']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>安全设备</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['safety']))
                        {
                            if($message[$j]['safety'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（安全设备:".$message[$j]['safety']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>空调</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['airConditioner_Access']))
                        {
                            if($message[$j]['airConditioner_Access'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（接入间空调:".$message[$j]['airConditioner_Access']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td rowspan="2">监控室</td>
            <td>门禁系统</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['Access']))
                        {
                            if($message[$j]['Access'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（门禁系统:".$message[$j]['Access']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>视频监控</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['Surveillance']))
                        {
                            if($message[$j]['Surveillance'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（视频监控:".$message[$j]['Surveillance']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?><tr>
            <td rowspan="12">主机房</td>
            <td>空调</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['airConditioner_Host']))
                        {
                            if($message[$j]['airConditioner_Host'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（主机房空调:".$message[$j]['airConditioner_Host']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>新风机</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['PAU']))
                        {
                            if($message[$j]['PAU'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（PAU:".$message[$j]['PAU']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>ATS柜</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['ATS']))
                        {
                            if($message[$j]['ATS'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（ATS:".$message[$j]['ATS']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>精密列头柜</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['PrecisionColumnHeadCabinet']))
                        {
                            if($message[$j]['PrecisionColumnHeadCabinet'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（精密列头柜:".$message[$j]['PrecisionColumnHeadCabinet']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>服务器</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['Server']))
                        {
                            if($message[$j]['Server'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（服务器:".$message[$j]['Server']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>存储</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['storager']))
                        {
                            if($message[$j]['storager'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（存储:".$message[$j]['storager']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>Vmware</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['Vmware']))
                        {
                            if($message[$j]['Vmware'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（Vmware:".$message[$j]['Vmware']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>交换机</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++) {
                    if ($date == $message[$j]['date']) {
                        if (isset($message[$j]['Switch'])) {
                            if ($message[$j]['Switch']) {
                                $remarks = $remarks . $message[$j]['date'] . "（交换机:" . $message[$j]['Switch'] . "）";
                            } else {
                                echo "&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>Zabbix</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['zabbix']))
                        {
                            if($message[$j]['zabbix'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（Zabbix:".$message[$j]['zabbix']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>网管系统</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['NetworkManagement']))
                        {
                            if($message[$j]['NetworkManagement'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（网管系统:".$message[$j]['NetworkManagement']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>环控系统</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['LoopControl']))
                        {
                            if($message[$j]['LoopControl'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（环控系统:".$message[$j]['LoopControl']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>
        <tr><td>network</td>
            <?php
            for($i=1;$i<=$monthdays;$i++)
            {
                echo"<td>";
                $date=$year."-0".$month."-".$i;
                for($j=0;$j<count($message);$j++)
                {
                    if($date==$message[$j]['date'])
                    {
                        if(isset($message[$j]['network']))
                        {
                            if($message[$j]['network'])
                            {
                                $remarks=$remarks.$message[$j]['date']."（network:".$message[$j]['network']."）";
                            }else{
                                echo"&#10004";
                            }
                        }
                    }
                }
                echo"</td>";
            }
            ?></tr>

        <tr><td colspan="2">备注及其它</td>
            <td colspan="31">
                <?php
                for($i=1;$i<=$monthdays;$i++)
                {
                    $date=$year."-0".$month."-".$i;
                    for($j=0;$j<count($message);$j++)
                    {
                        if($date==$message[$j]['date'])
                        {
                            if(isset($message[$j]['Remarks']))
                            {
                                if($message[$j]['Remarks'])
                                {
                                    $remarks=$remarks.$message[$j]['date']."（备注及其他:".$message[$j]['Remarks']."）";
                                }
                            }
                        }
                    }
                }
                echo $remarks;
                ?>
            </td></tr>
        </table>
</div>

</body>
</html>
<script>
    function month()
    {
        var month = $('#month').val();
        if(month<10)
        {
            month = "0"+month;
        }
        var year = $('#year').val();

        window.location.href="/inspection/report?year="+year+"&&month="+month;
    }
</script>
